# Opencv数据标准化和归一化



# 介绍
归一化和标准化都是对数据做变换，将原始的一组数据转换到某个范围或者说到某种状态。在数据处理的时候我们常会碰到如下三种处理：
<br />
<br />

- 归一化（Normalization）：将一组数据变化到某个固定区间内，比较常见的如[0, 1]。广义来说可以是各种区间，比如在对图像进行处理是会经常映射到[0, 255]，也有映射到[-1, 1]的情况
- 标准化（Standardization）：将一组数据变换为均值为0，标准差为1的分布（该分布并非一定符合正态分布）
- 中心化：中心化也叫零均值处理，就是用一组原始数据减去这些数据的均值。比如在ICP算法中会先对数据进行中心化

<br />
<br />

# 联系和区别
本质上，归一化和标准化都是对数据做线性变换。
但是也存在一些区别。比如第一，归一化会严格的限定变换后数据的区间。而标准化没有严格的区间限定，只是其数据的均值为0，标准差为1。第二，归一化对数据的缩放比例仅仅和极值有关，比如100个数，你除去极大值和极小值其他数据都更换掉，缩放比例$\alpha = X_{max}-X_{min}$是不变的；但是标准化中，如果除去极大值和极小值其他数据都更换掉，那么均值和标准差大概率会改变，这时候，缩放比例自然也改变了。
<br />
<br />


# 标准化和归一化的多种形式
广义的说，标准化和归一化同为对数据的线性变化，所以我们没必要规定死，归一化就是必须到[ 0 , 1]之间，我到[ 0 , 1 ]之间之后再乘一个255也没有问题对吧。常见的有以下几种：

- 归一化的最通用模式Normalization，也称线性归一化：
$$X_{n e w}=\frac{X_{i}-X_{\min }}{X_{\max }-X_{\min }}, \text { 范围 }[0,1]$$


- 均值归一化 （Mean normalization）：

$$X_{n e w}=\frac{X_{i}-\operatorname{mean}(X)}{X_{\text {max }}-X_{\min }} \text {, 范围 }[-1,1]$$

- 标准化(Standardization)，也叫标准差标准化：

$$X_{n e w}=\frac{X_{i}-\mu}{\sigma} \text {, 范围实数集 }$$

<br />
<br />

# 标准化、归一化的原因、用途
为何统计模型、机器学习和深度学习任务中经常涉及到数据(特征)的标准化和归一化呢，一半原因以下几点，当然可能还有一些其他的作用，大家见解不同，我说的这些是通常情况下的原因和用途。

1. 统计建模中，如回归模型，自变量X 的量纲不一致导致了回归系数无法直接解读或者错误解读；需要将X都处理到统一量纲下，这样才可比；
1. 机器学习任务和统计学任务中有很多地方要用到“距离”的计算，比如PCA，比如KNN，比如kmeans等等，假使算欧式距离，不同维度量纲不同可能会导致距离的计算依赖于量纲较大的那些特征而得到不合理的结果；
1. 参数估计时使用梯度下降，在使用梯度下降的方法求解最优化问题时， 归一化/标准化后可以加快梯度下降的求解速度，即提升模型的收敛速度。

<br />
<br />

# 什么时候Standardization，什么时候Normalization

- 如果对输出结果范围有要求，用归一化
- 如果数据较为稳定，不存在极端的最大最小值，用归一化
- 如果数据存在异常值和较多噪音，用标准化，可以间接通过中心化避免异常值和极端值的影响

<br />
<br />

# cv::normalize() 函数介绍
```cpp
void normalize(InputArray src, OutputArray dst, double alpha=1, double beta=0, int norm_type=NORM_L2, int dtype=-1, InputArray mask=noArray());
```

<br />

参数

- `src`  - 输入数组
- `dst` - 输出数组，支持原地运算
- `alpha` -  range normalization模式的最小值
- `beta `- range normalization模式的最大值，不用于norm normalization(范数归一化)模式。
- `norm_type` - 归一化的类型，可以有以下的取值
   - `NORM_MINMAX`:数组的数值被平移或缩放到一个指定的范围，线性归一化，一般较常用。比如归一化到[min, max]范围内，则计算公式如下：
      - $$d s t(i, j)=\frac{[\operatorname{src}(i, j)-\min (\operatorname{src}(x, y))] *(\max -\min )}{\max (\operatorname{src}(x, y))-\min (\operatorname{src}(x, y))}+\min$$
   -  `NORM_INF`: 归一化数组的无穷范数(绝对值的最大值)。每个值除以最大值来进行无穷范数归一化。同上最终归一化的值为单位向量的每个值乘以参数要归一化的范数值alpha
   - ` NORM_L1` :  归一化数组的L1-范数(绝对值的和)。数组元素绝对值求和，然后算出每一个元素比上总和的比值，加起来总为1。这里要归一化的范数值为1.0，所求出的比值即为最后归一化后的值，若归一化范数值alpha为2.0，则每个比值分别乘以2.0即得到最后归一化后的结果为0.2, 0.8, 1.0，以此类推
   - ` NORM_L2`: 归一化数组的L2-范数(各元素的平方和然后求平方根 ，欧氏距离)。即将该向量归一化为单位向量，每个元素值除以该向量的模长。同上最终归一化的值为单位向量的每个值乘以参数要归一化的范数值alpha
- dtype - 为负值时, 输出数据类型和输入数据类型一致，否则和src通道一致，depth =CV_MAT_DEPTH(dtype)
- mask -  掩码。选择感兴趣区域，选定后只能对该区域进行操作。

<br />
<br />

# 参考链接

[标准化和归一化，请勿混为一谈，透彻理解数据变换](https://blog.csdn.net/weixin_36604953/article/details/102652160)





